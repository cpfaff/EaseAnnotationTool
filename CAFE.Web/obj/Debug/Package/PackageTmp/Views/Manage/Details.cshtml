@model CAFE.Web.Models.Manage.UserDetailsViewModel
@{
    ViewBag.Title = "My profile details";
}

<style>
    .user-row {
        margin-bottom: 14px;
    }

        .user-row:last-child {
            margin-bottom: 0;
        }

    .dropdown-user {
        margin: 13px 0;
        padding: 5px;
        height: 100%;
    }

        .dropdown-user:hover {
            cursor: pointer;
        }

    .table-user-information > tbody > tr {
        border-top: 1px solid rgb(221, 221, 221);
    }

        .table-user-information > tbody > tr:first-child {
            border-top: 0;
        }


        .table-user-information > tbody > tr > td {
            border-top: 0;
        }

    .toppad {
        margin-top: 20px;
    }
</style>

<!-- Modal -->
<div class="modal fade" id="removingAccount_Modal" tabindex="-1" role="dialog" aria-labelledby="removingAccount_Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form action="@Url.Action("Remove")" method="post">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Account removing</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger ai-help" role="alert">
                        <span class="glyphicon glyphicon-warning-sign"></span><b>You are about to delete your account</b> Please keep in mind that there is no way back! Your account cannot be restored and there is no way to restore your data any more. It is recommended that you export all your data before doing this.
                    </div>
                    <p><b>If you are really sure about it, please choose what should happen with data you created: </b></p>
                    <div class="radio">
                        <label>
                            <input type="radio" name="removeOwnData" value=false checked>
                            Keep my data on the server (will be assigned to one of our administrators)
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="removeOwnData" value=true>
                            Remove data completely (we really recommended to export it first)
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger">Remove account</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="importData_Modal" tabindex="-1" role="dialog" aria-labelledby="importData_Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form action="@Url.Action("ImportData")" method="post" enctype="multipart/form-data">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Importing User's data</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning ai-help" role="alert">
                        <span class="glyphicon glyphicon-info-sign"></span>This feature helps you to restore your complete data which was previously exported from this or another EASE - installation
                    </div>
                    <p>Please select a .zip file generated by EASE: </p>
                    <input type="file" name="file"/>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Import</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="exportData_Modal" tabindex="-1" role="dialog" aria-labelledby="exportData_Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form action="@Url.Action("ExportData")" method="post">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Exporting User's data</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning ai-help" role="alert">
                        <span class="glyphicon glyphicon-info-sign"></span>This feature helps you to export all of your data including Annotation Items and files. The generated .zip archive can be used for further import of these data into another instance of EASE or just as your personal backup
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Export</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="container">
    @if (ViewData["ErrorMessage"] != null)
    {
        <div class="row">
            <div class="alert alert-danger">@ViewData["ErrorMessage"]</div>
        </div>    
    }
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3 toppad">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">My Profile</h3>

                </div>
                <div class="panel-body">
                    <div class="row" style="text-align: right;">
                        <a href="@Url.Action("Edit")" class="btn btn-default" style="margin-right: 5px;">Edit</a>
                        <a href="" data-toggle="modal" data-target="#removingAccount_Modal" class="btn btn-default" style="margin-right: 15px;">Delete Account</a>
                    </div>
                    <div class="row">
                        <div class="col-md-3 col-lg-3 " align="center">
                            @if (string.IsNullOrEmpty(Model.PhotoUrl))
                            {
                                <img alt="User Pic" src="https://cdn1.iconfinder.com/data/icons/user-pictures/101/malecostume-512.png" class="img-circle img-responsive">
                            }
                            else
                            {
                                <img alt="User Pic" src="@Model.PhotoUrl" class="img-circle img-responsive">
                            }
                        </div>
                        <div class="col-md-9 col-lg-9 ">
                            <table class="table table-user-information">
                                <tbody>
                                <tr>
                                    <td>Name:</td>
                                    <td>@Model.Name</td>
                                </tr>
                                <tr>
                                    <td>Surname:</td>
                                    <td>@Model.Surname</td>
                                </tr>
                                    <tr>
                                        <td>Salutation:</td>
                                        <td>@Model.Salutation</td>
                                    </tr>
                                <tr>
                                    <td>E-mail</td>
                                    <td>@Model.Email</td>
                                </tr>
                                <tr>
                                    <td>Phone:</td>
                                    <td>@Model.Phone</td>
                                </tr>
                                <tr>
                                    <td>Postal address:</td>
                                    <td>@Model.PostalAddress</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row" style="text-align: right;">
                        <a href="" data-toggle="modal" data-target="#importData_Modal" class="btn btn-default" style="margin-right: 5px;">Import Data</a>
                        <a href="" data-toggle="modal" data-target="#exportData_Modal" class="btn btn-default" style="margin-right: 15px;">Export Data</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>